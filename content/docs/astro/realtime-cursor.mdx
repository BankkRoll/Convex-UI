---
title: Realtime Cursor
description: Real-time cursor sharing for collaborative Astro applications
---

<BlockPreview name="realtime-cursor-demo" />

## Installation

<BlockItem
  name="realtime-cursor-astro"
  description="Renders realtime cursors from other users in a room."
/>

## Folder structure

<RegistryBlock itemName="realtime-cursor-astro" />

## Introduction

The Realtime Cursors component lets users share their cursor position with others in the same roomâ€”perfect for real-time collaboration. It handles all the setup and boilerplate for you, so you can add it to your app with minimal effort.

**Features**

- Broadcast cursor position to other users in the same room
- Customizable cursor appearance with smooth animations
- Presence detection (automatically joins/leaves users)
- Throttled updates to reduce network traffic
- Low-latency updates using Convex real-time queries
- Room-based isolation for scoped collaboration
- Automatic cleanup on unmount

## Usage

The Realtime Cursor component is designed to be used in a room. It can be used to build real-time collaborative applications. Since it requires interactivity, use the `client:load` directive in Astro:

<CodeBlock language="astro">
{`---
// src/pages/collaborate.astro
import Layout from "@/layouts/Layout.astro";
import CollaborativeCanvas from "@/components/CollaborativeCanvas";
---

<Layout title="Collaborate">
  <CollaborativeCanvas client:load />
</Layout>`}
</CodeBlock>

Create a React component that includes the Realtime Cursors:

<CodeBlock language="tsx">
{`// src/components/CollaborativeCanvas.tsx
import { RealtimeCursors } from "@/components/realtime-cursors";

export default function CollaborativeCanvas() {
  return (
    <div className="w-full min-h-screen">
      <RealtimeCursors
        roomName="macrodata_refinement_office"
        username="Mark Scout"
      />
    </div>
  );
}`}
</CodeBlock>

## How it works

The component uses Convex mutations and queries for presence tracking:

<CodeBlock language="ts">
{`// convex/presence.ts
import { query, mutation } from "./_generated/server";
import { v } from "convex/values";

export const list = query({
  args: { roomName: v.string() },
  handler: async (ctx, args) => {
    // Return all cursor positions for the room
    return await ctx.db
      .query("presence")
      .withIndex("by_room", (q) => q.eq("roomName", args.roomName))
      .collect();
  },
});

export const update = mutation({
  args: {
    roomName: v.string(),
    oderId: v.string(),
    x: v.number(),
    y: v.number(),
    username: v.string(),
  },
  handler: async (ctx, args) => {
    // Upsert cursor position
  },
});

export const leave = mutation({
  args: { oderId: v.string() },
  handler: async (ctx, args) => {
    // Remove user's cursor on disconnect
  },
});`}
</CodeBlock>

## Props

| Prop       | Type     | Description                                                |
| ---------- | -------- | ---------------------------------------------------------- |
| `roomName` | `string` | Unique identifier for the shared room or session.          |
| `username` | `string` | Name of the current user; used to track and label cursors. |

## Astro Integration Notes

When using the Realtime Cursor component in Astro:

- Always use `client:load` directive to ensure immediate interactivity
- The component tracks cursor position within its container, so ensure the parent element has appropriate dimensions
- Consider wrapping the component with the Convex provider if not already set up at a higher level

<CodeBlock language="astro">
{`---
import { ConvexAuthProvider } from "@/lib/convex/provider";
import { RealtimeCursors } from "@/components/realtime-cursors";
---

<div class="w-full min-h-screen">
  <ConvexAuthProvider client:load>
    <RealtimeCursors
      client:load
      roomName="my-room"
      username="User"
    />
  </ConvexAuthProvider>
</div>`}
</CodeBlock>

## Further reading

- [Convex Real-time Queries](https://docs.convex.dev/client/react/queries)
- [Building Presence Features](https://docs.convex.dev/production/best-practices)
- [Astro React Integration](https://docs.astro.build/en/guides/integrations-guide/react/)

### Smoother cursors

While our Realtime Cursor component aims to keep things simple and lightweight, you may want to add smoother cursor animations for a more polished experience. Libraries like [perfect-cursors](https://github.com/steveruizok/perfect-cursors) can be integrated to add sophisticated interpolation between cursor positions. This is especially useful when dealing with network latency, as it creates fluid cursor movements even when position updates are received at longer intervals (e.g., every 50-80ms). The library handles the complex math of creating natural-looking cursor paths while maintaining performance.
