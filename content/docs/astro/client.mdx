---
title: Convex Client
description: Convex client for Astro applications
---

## Installation

<BlockItem name="convex-client-astro" description="Convex Client for Astro" />

## Folder structure

<RegistryBlock itemName="convex-client-astro" />

## Usage

This block installs a Convex client for connecting your Astro project to Convex. It's designed for use with Astro's React islands architecture, enabling real-time data synchronization in interactive components.

If you've already set up a Convex client in your project, you can just continue using that existing setup.

### Getting started

After installing the block, you'll have the following environment variable in your `.env` file:

<CodeBlock language="env">{`PUBLIC_CONVEX_URL=`}</CodeBlock>

**For local development:** Simply run `npx convex dev` which will automatically configure this environment variable. No dashboard or account needed to get started!

When you're ready to deploy, you can find your production URL in your [Convex dashboard](https://dashboard.convex.dev) under your project settings.

### Provider setup

Wrap your React components with the Convex provider to enable real-time queries. In Astro, React components are rendered as islands using the `client:load` directive:

<CodeBlock language="astro">
{`---
// src/pages/index.astro
import { ConvexAuthProvider } from "@/lib/convex/provider";
import YourReactComponent from "@/components/YourReactComponent";
---

<ConvexAuthProvider client:load>
  <YourReactComponent client:load />
</ConvexAuthProvider>`}
</CodeBlock>

Alternatively, you can wrap individual React components with the provider:

<CodeBlock language="tsx">
{`// src/components/MyConvexComponent.tsx
import { ConvexAuthProvider } from "@/lib/convex/provider";

export default function MyConvexComponent() {
  return (
    <ConvexAuthProvider>
      {/* Your component content */}
    </ConvexAuthProvider>
  );
}`}
</CodeBlock>

### Astro React Islands

Astro uses a partial hydration architecture where React components are hydrated as interactive "islands" on an otherwise static page. To make React components interactive, you need to add a client directive:

- `client:load` - Hydrate the component immediately on page load
- `client:idle` - Hydrate the component once the page is done with its initial load
- `client:visible` - Hydrate the component once it enters the viewport

For real-time Convex components, use `client:load` to ensure they're interactive immediately:

<CodeBlock language="astro">
{`---
import { RealtimeChat } from "@/components/realtime-chat";
---

<RealtimeChat client:load roomName="general" username="user123" />`}
</CodeBlock>

## Local Development

Convex makes local development simple:

1. Run `npx convex dev` to start your local Convex backend
2. Your schema is defined in `convex/schema.ts` (create this file if it doesn't exist)
3. All backend functions live in the `convex/` directory
4. Changes are automatically synced in real-time

No dashboard needed, no complex configuration. Everything works locally first!

## Further reading

- [Convex React Quickstart](https://docs.convex.dev/quickstart/react)
- [Convex Client Documentation](https://docs.convex.dev/client/react)
- [Astro React Integration](https://docs.astro.build/en/guides/integrations-guide/react/)
