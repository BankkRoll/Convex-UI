---
title: Password-based Authentication
description: Password-based authentication block for React Single Page Applications
---

<Badge variant="secondary" className="mb-4">
  New
</Badge>

A complete authentication solution with email/password sign-in, sign-up, forgot password, and password reset flows. Built on top of Convex Auth with secure, real-time user management.

<BlockPreview name="password-based-auth/auth/sign-up" />

## Installation

<BlockItem
  name="password-based-auth-react"
  description="All needed components for the password based auth flow"
/>

## Folder structure

This block includes the [Convex client](/ui/docs/react/client). If you already have one installed, you can skip overwriting it.

<RegistryBlock itemName="password-based-auth-react" />

## Usage

Once you install the block in your React project, you'll get all the necessary pages and components to set up a password-based authentication flow.

### Getting started

After installing the block, you'll have the following environment variable in your `.env.local` file:

<CodeBlock language="env">{`VITE_CONVEX_URL=`}</CodeBlock>

**For local development:** Simply run `npx convex dev` which will automatically configure this environment variable. No dashboard or account needed to get started!

### Setting up Convex Auth

The password-based authentication block uses Convex Auth to handle user authentication securely. Here's how the schema and backend work:

#### 1. Install the auth package

<CodeBlock language="bash">{`npm install @convex-dev/auth`}</CodeBlock>

#### 2. Configure authentication providers

Create or update `convex/auth.config.ts` to enable password authentication:

<CodeBlock language="ts">
{`import { Password } from "@convex-dev/auth/providers/Password";

export default {
  providers: [Password],
};`}
</CodeBlock>

This configures Convex Auth to accept email/password authentication.

#### 3. Set up the auth tables in your schema

The auth system requires specific tables to store user data and sessions. Add these to `convex/schema.ts`:

<CodeBlock language="ts">
{`import { defineSchema } from "convex/server";
import { authTables } from "@convex-dev/auth/server";

export default defineSchema({
  ...authTables,
  // Your other tables go here
});`}
</CodeBlock>

The `authTables` includes:

- `users` - Stores user accounts with email, password hash, and profile data
- `authSessions` - Manages active user sessions
- `authAccounts` - Links authentication providers to users
- `authRefreshTokens` - Handles token refresh for long-lived sessions

**Important:** Your schema is defined in code, not in a dashboard. When you run `npx convex dev`, Convex automatically syncs your schema and creates the necessary tables locally.

### Setting up routes

1. Update the redirect paths in `login-form.tsx` and `sign-up-form.tsx` components to point to the logged-in routes in your app. Our examples use `/protected`, but you can set this to whatever fits your app.

2. Add route protection to authenticated pages:

<CodeBlock language="tsx">
{`import { useConvexAuth } from "convex/react";
import { useNavigate } from "react-router-dom";
import { useEffect } from "react";

export default function ProtectedPage() {
  const { isAuthenticated, isLoading } = useConvexAuth();
  const navigate = useNavigate();

useEffect(() => {
if (!isLoading && !isAuthenticated) {
navigate("/login");
}
}, [isAuthenticated, isLoading, navigate]);

if (isLoading) {
return <div>Loading...</div>;
}

return <div>Protected content</div>;
}`}

</CodeBlock>

## Component API

The password-based authentication block includes several customizable components. Below are their props and usage patterns.

### LoginForm

The login form component handles email/password sign-in.

| Prop                    | Type         | Default     | Description                                                                                                           |
| ----------------------- | ------------ | ----------- | --------------------------------------------------------------------------------------------------------------------- |
| `onSignUpClick`         | `() => void` | `undefined` | Optional callback triggered when the user clicks "Sign up". Use this to navigate to your sign-up page.                |
| `onForgotPasswordClick` | `() => void` | `undefined` | Optional callback triggered when the user clicks "Forgot password". Use this to navigate to your password reset page. |

<CodeBlock language="tsx">
{`import { LoginForm } from "@/components/auth/login-form";
import { useNavigate } from "react-router-dom";

export default function LoginPage() {
  const navigate = useNavigate();

return (
<LoginForm
onSignUpClick={() => navigate("/sign-up")}
onForgotPasswordClick={() => navigate("/forgot-password")}
/>
);
}`}

</CodeBlock>

### SignUpForm

The sign-up form component handles new user registration.

| Prop           | Type         | Default     | Description                                                                                                    |
| -------------- | ------------ | ----------- | -------------------------------------------------------------------------------------------------------------- |
| `onLoginClick` | `() => void` | `undefined` | Optional callback triggered when the user clicks "Sign in". Use this to navigate to your login page.           |
| `onSuccess`    | `() => void` | `undefined` | Optional callback triggered after successful account creation. Use this to redirect or show a success message. |

<CodeBlock language="tsx">
{`import { SignUpForm } from "@/components/auth/sign-up-form";
import { useNavigate } from "react-router-dom";

export default function SignUpPage() {
  const navigate = useNavigate();

return (
<SignUpForm
onLoginClick={() => navigate("/login")}
onSuccess={() => navigate("/protected")}
/>
);
}`}

</CodeBlock>

## How Convex Works Locally

One of the best parts about building with Convex is how seamless local development is:

1. **Run `npx convex dev`** - This starts your local Convex backend
2. **Schema is in your code** - Define tables in `convex/schema.ts`, not in a dashboard
3. **Backend functions live locally** - All Convex functions are in your `convex/` directory
4. **Real-time by default** - Data updates instantly across all connected clients, even in local development
5. **No account needed initially** - Start building immediately without signing up

When you're ready to deploy, run `npx convex deploy` to push your backend to production.

## Troubleshooting

### Environment variable not found

If you get an error about `VITE_CONVEX_URL` not being set:

1. Make sure you've run `npx convex dev` at least once
2. Check that `.env.local` exists in your project root
3. Restart your dev server after running `npx convex dev`

### Auth tables not created

If you see errors about missing tables:

1. Ensure `convex/schema.ts` includes `...authTables`
2. Save the file to trigger Convex to sync the schema
3. Check the Convex dev terminal for any schema errors

### Redirect not working after login

Make sure you've updated the redirect paths in `login-form.tsx` and `sign-up-form.tsx` to match your app's protected route.

## Further reading

- [Convex Auth Documentation](https://docs.convex.dev/auth)
- [Password Authentication](https://labs.convex.dev/auth/config/passwords)
- [Convex Auth Setup Guide](https://labs.convex.dev/auth/setup)
